<%= form_with(model: plant, url: [@company, plant], local: true) do |form| %>
  <% if plant.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(plant.errors.count, "error") %> prohibited this plant from being saved:</h2>

      <ul>
      <% plant.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div class="field">
    <%= form.label :code %>
    <%= form.text_field :code %>
  </div>

  <div class="field">
    <%= form.label :address01 %>
    <%= form.text_field :address01 %>
  </div>

  <div class="field">
    <%= form.label :address02 %>
    <%= form.text_field :address02 %>
  </div>

  <div class="field">
    <%= form.label :state %>
    <%= form.text_field :state %>
  </div>

  <div class="field">
    <%= form.label :zip %>
    <%= form.text_field :zip %>
  </div>

  <div class="field">
    <%= form.label :country_id %>
    <%= form.collection_select(:country_id, @countries, :id, :name, {prompt: 'Select a Country'})  %>
  </div>

  <div class="field">
    <%= form.label :phone %>
    <%= form.text_field :phone %>
  </div>

  <div class="field">
    <%= form.label :system_size %>

    <div class="system_size">
      <ul class="system_size__elements">
      <%= render 'system_size', plant: @plant %>
      </ul>
      <div class="system_size__bottom">
        <a href="#" class="system_size__plus">+</a>
      </div>
    </div>

    <%= form.label 'Total Size of the modules' %>
    <%= form.text_field 'system_size_total', value: @plant.system_size.reduce(:+), disabled: true %>
    <%= form.hidden_field :system_size %>
  </div>

  <div class="field">
    <%= form.label :flow_design %>
    <%= form.text_field :flow_design %>
  </div>

  <div class="field">
    <%= form.label :discharge_point_id %>
    <%= form.collection_select(:discharge_point_id, @points, :id, :name, {prompt: 'Select a Discharge Point'})  %>
  </div>

  <div class="field">
    <%= form.label :startup_date %>
    <%= form.date_select :startup_date %>
  </div>

  <div class="field">
    <%= form.label 'Plant Contact' %>
    <%= form.collection_select(:contact_id, @users, :id, :full_name, {prompt: 'Select a Company Contact'})  %>
  </div>

  <div class="field">
    <%= form.label 'BF Contact' %>
    <%= form.collection_select(:bf_contact_id, @users, :id, :full_name, {prompt: 'Select a Company Contact'})  %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
